<div class="quiz-choice-container">
    <div class="header-section">
        <h1 class="main-title">Choisissez votre Quiz</h1>
        <p class="subtitle">S√©lectionnez le type de quiz que vous souhaitez jouer</p>
    </div>

    <!-- Section Quiz Rapides -->
    <div class="quiz-section">
        <h2 class="section-title">‚ö° Quiz Rapides</h2>
        <p class="section-subtitle">Commencez imm√©diatement avec nos s√©lections populaires</p>
        
        <div class="quiz-options quick-quizzes">
            <div *ngFor="let quiz of getQuickQuizzes()" class="quiz-card quick" [style.--accent-color]="getQuizColor(quiz.id)">
                <div class="quiz-icon">{{ getQuizIcon(quiz.id) }}</div>
                <h3 class="quiz-name">{{ quiz.name }}</h3>
                <p class="quiz-description">{{ getQuizDescription(quiz) }}</p>
                
                <a [routerLink]="quiz.route" class="quiz-button" [style.background-color]="getQuizColor(quiz.id)">
                    <span>{{ translations?.quiz_choice?.start || 'Commencer' }}</span>
                    <span class="arrow">‚Üí</span>
                </a>
            </div>
        </div>
    </div>

    <!-- Section Quiz Personnalis√©s -->
    <div class="quiz-section">
        <h2 class="section-title">üé® Quiz Personnalis√©s</h2>
        <p class="section-subtitle">Cr√©ez votre quiz sur mesure en choisissant vos pr√©f√©rences</p>
        
        <div class="quiz-options custom-quizzes">
            <div *ngFor="let quiz of getCustomQuizzes()" class="quiz-card custom" [style.--accent-color]="getQuizColor(quiz.id)">
                <div class="quiz-icon">{{ getQuizIcon(quiz.id) }}</div>
                <h3 class="quiz-name">{{ quiz.name }}</h3>
                <p class="quiz-description">{{ getQuizDescription(quiz) }}</p>
                
                <a [routerLink]="quiz.route" class="quiz-button" [style.background-color]="getQuizColor(quiz.id)">
                    <span>{{ translations?.quiz_choice?.customize || 'Personnaliser' }}</span>
                    <span class="arrow">‚Üí</span>
                </a>
            </div>
        </div>
    </div>

    <!-- Section Quiz Cr√©√©s -->
    <div *ngIf="getUserCreatedQuizzes().length > 0" class="quiz-section">
        <h2 class="section-title">üìù Mes Quiz Cr√©√©s</h2>
        <p class="section-subtitle">Vos quiz personnalis√©s cr√©√©s</p>
        
        <div class="quiz-options user-created-quizzes">
            <div *ngFor="let quiz of getUserCreatedQuizzes()" class="quiz-card user-created" [style.--accent-color]="getQuizColor(quiz.id)">
                <div class="quiz-icon">{{ getQuizIcon(quiz.id) }}</div>
                <h3 class="quiz-name">{{ quiz.name }}</h3>
                <p class="quiz-description">{{ getQuizDescription(quiz) }}</p>
                
                <div class="quiz-actions">
                    <a [routerLink]="quiz.route" class="quiz-button" [style.background-color]="getQuizColor(quiz.id)">
                        <span>{{ translations?.quiz_choice?.play || 'Jouer' }}</span>
                        <span class="arrow">‚Üí</span>
                    </a>
                    <button *ngIf="isAdministrator" class="delete-quiz-btn" (click)="deleteUserQuiz(quiz.id)" title="Supprimer ce quiz">
                        üóëÔ∏è
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Section Admin -->
    <div *ngIf="isAdministrator" class="admin-section">
            <div class="admin-quiz-card manage-quizzes">
                <div class="admin-icon">‚öôÔ∏è</div>
                <h3 class="admin-title">{{ translations?.admin?.quizManagement || 'G√©rer les Quiz' }}</h3>
                <p class="admin-description">{{ translations?.admin?.manageDescription || 'Activer/d√©sactiver les quiz disponibles' }}</p>
                
                <button class="admin-button" (click)="openQuizManager()">
                    <span>{{ translations?.admin?.manageQuizzes || 'G√©rer les Quiz' }}</span>
                    <span class="arrow">‚öôÔ∏è</span>
                </button>
            </div>

            <div class="admin-quiz-card create-quiz">
                <div class="admin-icon">‚ûï</div>
                <h3 class="admin-title">{{ translations?.admin?.createNewQuiz || 'Cr√©er un Quiz' }}</h3>
                <p class="admin-description">{{ translations?.admin?.createDescription || 'Ajouter un nouveau quiz personnalis√©' }}</p>
                
                <button class="admin-button" (click)="openQuizCreator()">
                    <span>{{ translations?.admin?.addNewQuiz || 'Cr√©er un Quiz' }}</span>
                    <span class="arrow">+</span>
                </button>
            </div>
    </div>

    <!-- Modal Gestionnaire de Quiz -->
    <div *ngIf="showQuizManager && isAdministrator" class="admin-overlay">
        <div class="admin-modal">
            <div class="admin-header">
                <h2>{{ translations?.admin?.quizManagement || 'Gestion des Quiz' }}</h2>
                <button class="close-admin" (click)="closeQuizManager()">‚úï</button>
            </div>

            <div class="admin-content">
                <div class="existing-quizzes">
                    <h3>{{ translations?.admin?.availableQuizzes || 'Quiz Disponibles' }}</h3>
                    <div class="quiz-list">
                        <div *ngFor="let quiz of adminService.getAllQuizzes()" class="quiz-admin-item">
                            <div class="quiz-info">
                                <span class="quiz-name-admin">{{ quiz.name }}</span>
                                <span class="quiz-details">{{ quiz.questions }} questions - {{ quiz.continent }}</span>
                            </div>
                            <div class="quiz-controls">
                                <button 
                                    class="toggle-quiz"
                                    [class.enabled]="quiz.enabled"
                                    (click)="toggleQuiz(quiz.id)">
                                    {{ quiz.enabled ? (translations?.admin?.disableQuiz || 'D√©sactiver') : (translations?.admin?.enableQuiz || 'Activer') }}
                                </button>
                                <button class="remove-quiz" (click)="removeQuiz(quiz.id)">
                                    üóëÔ∏è
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Cr√©ateur de Quiz -->
    <div *ngIf="showQuizCreator && isAdministrator" class="admin-overlay">
        <div class="admin-modal quiz-creator-modal">
            <div class="admin-header">
                <h2>{{ translations?.admin?.newQuizForm?.title || 'Cr√©er un nouveau quiz' }}</h2>
                <button class="close-admin" (click)="closeQuizCreator()">‚úï</button>
            </div>

            <div class="admin-content">
                <form (ngSubmit)="createNewQuiz()" #quizForm="ngForm">
                    <div class="form-group">
                        <label>{{ translations?.admin?.newQuizForm?.name || 'Nom du quiz' }}</label>
                        <input 
                            type="text" 
                            [(ngModel)]="newQuizData.name" 
                            name="name" 
                            required 
                            class="form-input"
                            placeholder="Ex: Quiz Asie">
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>{{ translations?.admin?.newQuizForm?.questions || 'Nombre de questions' }}</label>
                            <input 
                                type="number" 
                                [(ngModel)]="newQuizData.questions" 
                                name="questions" 
                                min="5" 
                                max="50" 
                                required 
                                class="form-input">
                        </div>

                        <div class="form-group">
                            <label>{{ translations?.admin?.newQuizForm?.continent || 'Continents' }} (s√©lection multiple)</label>
                            <div class="continent-checkboxes">
                                <div *ngFor="let continent of adminService.getAvailableContinents()" class="continent-option">
                                    <input 
                                        type="checkbox"
                                        [id]="'cont-' + continent"
                                        [checked]="isContinentSelected(continent)"
                                        (change)="toggleContinent(continent)"
                                        class="continent-checkbox">
                                    <label [for]="'cont-' + continent" class="continent-label">
                                        {{ continent }}
                                    </label>
                                </div>
                            </div>
                            <small class="form-hint">
                                S√©lectionn√©s: {{ newQuizData.continents.join(', ') || 'Aucun continent s√©lectionn√©' }}
                            </small>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>{{ translations?.admin?.newQuizForm?.languages || 'Langues' }} (s√©lection multiple)</label>
                        <div class="language-checkboxes">
                            <div *ngFor="let language of adminService.getAvailableLanguages()" class="language-option">
                                <input 
                                    type="checkbox"
                                    [id]="'lang-' + language"
                                    [checked]="isLanguageSelected(language)"
                                    (change)="toggleLanguage(language)"
                                    class="language-checkbox">
                                <label [for]="'lang-' + language" class="language-label">
                                    {{ language }}
                                </label>
                            </div>
                        </div>
                        <small class="form-hint">
                            S√©lectionn√©s: {{ newQuizData.languages.join(', ') || 'Aucune langue s√©lectionn√©e' }}
                        </small>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="create-quiz-btn" [disabled]="newQuizData.languages.length === 0 || newQuizData.continents.length === 0">
                            {{ translations?.admin?.newQuizForm?.save || 'Cr√©er le quiz' }}
                        </button>
                        <button type="button" class="cancel-btn" (click)="closeQuizCreator()">
                            {{ translations?.admin?.newQuizForm?.cancel || 'Annuler' }}
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div class="back-section">
        <a routerLink="/home" class="back-button">
            ‚Üê {{ translations?.quiz_choice?.backHome || 'Retour √† l\'accueil' }}
        </a>
    </div>
</div>